@model OsnTestApp.Data.Student
@{
}
<form method="post">
    <div class="border mt-3 p-3">
        <div class="row pb-2">
            <h2 class="text-primary">Add Student</h2>
        </div>
        @*<div asp-validation-summary="All"></div>*@
        <div class="form-group mb-3">
            <label asp-for="Name"></label>
            <input asp-for="Name" class="form-control" />
            <span asp-validation-for="Name" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="DateOfBirth"></label>
            <input asp-for="DateOfBirth" class="form-control" />
            <span asp-validation-for="DateOfBirth" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Address"></label>
            <input asp-for="Address" class="form-control" />
            <span asp-validation-for="Address" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Parent.Name">Parent Name</label>
            <input asp-for="Parent.Name" class="form-control" />
            <span asp-validation-for="Parent.Name" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="Parent.Phone">Parent Phone</label>
            <input asp-for="Parent.Phone" class="form-control" />
            <span asp-validation-for="Parent.Phone" class="text-danger"></span>
        </div>
        <br />
        <table class="table table-bordered table-striped table-striped-columns" style="width:100%;" id="marksTable">
            <thead>
                <tr>
                    <th>Subject Name</th>
                    <th>Term</th>
                    <th>Mark</th>
                    <th>IsAbsent</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <input asp-for="Marks[0].SubjectName" class="form-control" />
                        <span asp-validation-for="Marks[0].SubjectName" class="text-danger"></span>
                    </td>
                    <td>
                        <input asp-for="Marks[0].Term" class="form-control" />
                        <span asp-validation-for="Marks[0].Term" class="text-danger"></span>
                    </td>
                    <td>
                        <input asp-for="Marks[0].Mark" class="form-control" />
                        <span asp-validation-for="Marks[0].Mark" class="text-danger"></span>
                    </td>
                    <td>
                        <input type="checkbox" name="Marks[0].IsAbsent" />
                        <span asp-validation-for="Marks[0].IsAbsent" class="text-danger"></span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <button type="button" class="btn btn-primary" onclick="addNewRow()">Add New Row</button>
    <script>
        var index = 1;
        function addNewRow() {
            var table = document.getElementById("marksTable");
            var row = table.insertRow(-1);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            cell1.innerHTML = `<input name="Marks[${index}].SubjectName" class="form-control" />`;
            cell2.innerHTML = `<input name="Marks[${index}].Term" class="form-control" />`;
            cell3.innerHTML = `<input name="Marks[${index}].Mark" class="form-control" />`;
            cell4.innerHTML = `<input type="checkbox" name="Marks[${index}].IsAbsent"/>`;
            index++;
        }
    </script>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>

<!--Moving the validation from server side to client side by using exisitng partial views. Custom error will still be server side.-->
@section Scripts{
    @{
        <partial name="_ValidationScriptsPartial"></partial>
    }
}
    
